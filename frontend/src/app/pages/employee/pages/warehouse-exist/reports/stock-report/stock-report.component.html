<section>
  <div class="card">
    <div class="flex col-12 mb-3">
      <h5 class="my-auto">Stock Report</h5>
    </div>
    <p-table #dt1 dataKey="id" [value]="list" [lazy]="true" (onLazyLoad)="fetchList($event)" [rows]="10"
      [rowHover]="true" [paginator]="true" [showCurrentPageReport]="true" [rowsPerPageOptions]="[10,25,50]"
      [totalRecords]="totalRecords" responsiveLayout="scroll">
      <ng-template pTemplate="caption">
        <form class="form" [formGroup]="stockForm" (ngSubmit)="onSubmit()">
          <div class="p-fluid p-formgrid grid">
            <div class="col-12 md:col-6 xl:col-4">
              <label for="date" class="block font-medium pb-2 required">Date</label>
              <p-calendar inputId="date" selectionMode="range" [maxDate]="today" showButtonBar="true" showIcon="true"
                [readonlyInput]="true" dateFormat="MM d, yy" placeholder="start date - end date" formControlName="date">
              </p-calendar>
              <small class="p-error" *ngIf="(controls.date.touched || submitted) && controls.date.errors?.required">
                select date</small>
            </div>
            <div class="col-12 md:col-6 xl:col-4">
              <label for="warehouse" class="block font-medium pb-2 required">Warehouse</label>
              <p-multiSelect [options]="warehouseList" defaultLabel="Select Warehouses" optionLabel="name"
                optionValue="id" display="chip" formControlName="warehouses"></p-multiSelect>
              <small class="p-error"
                *ngIf="(controls.warehouses.touched || submitted) && controls.warehouses.errors?.required">
                Select warehouse
              </small>
            </div>
            <div class="flex col-7 md:col-4 xl:col-3 pr-2">
              <button pButton type="submit" label="Generate Report" [disabled]="!stockForm.valid" [loading]="submitted"
                class="p-custom mt-auto"></button>
            </div>
            <div class="flex col-5 md:col-2 xl:col-1">
              <button pButton type="button" label="Reset" [disabled]="!stockForm.value || stockForm.pristine "
                class="p-custom mt-auto p-button-outlined" (click)="reset()"></button>
            </div>
            <div class="col-12 flex justify-content-between mt-3 pb-0">
              <div><button pButton label="Clear" class="p-button-outlined mb-2" icon="pi pi-filter-slash"
                  (click)="clear(dt1)"></button>
              </div>
              <span class="flex justify-content-end">
                <button pButton type="button" icon="pi pi-file-pdf" class="p-button-outlined mx-2 mb-2"></button>
                <button pButton type="button" icon="pi pi-file-excel" class="p-button-outlined mr-2 mb-2"></button>
                <button pButton type="button" icon="pi pi-print" class="mb-2" (click)="print()"></button>
              </span>
            </div>
          </div>
        </form>
      </ng-template>
      <ng-template pTemplate="header">
        <tr>
          <th *ngFor="let column of columns" [pSortableColumn]="column.key" [style]="column.style">
            <uikit-table-column [column]="column"></uikit-table-column>
          </th>
        </tr>
      </ng-template>
      <ng-template pTemplate="body" let-data>
        <tr *ngIf="!loading">
          <td *ngFor="let column of columns" [style]="column.style">
            <ng-container [ngSwitch]="column.key">

              <span *ngSwitchDefault>
                {{data[column.key]}}
              </span>

            </ng-container>
          </td>
        </tr>
        <tr *ngIf="loading">
          <td *ngFor="let list of list">
            <p-skeleton></p-skeleton>
          </td>
        </tr>
      </ng-template>
      <ng-template pTemplate="emptymessage">
        <tr>
          <td colspan="9">No records found</td>
        </tr>
      </ng-template>
    </p-table>
  </div>
</section>